{{>header}}

{{>navbar}}


<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i"
    rel="stylesheet">
<link href="/css/create.css" rel="stylesheet" media="all">


<div class="page-wrapper mt-5 bg-gra-03 p-t-45 p-b-50 pt-5 mt-0">
    <div class="wrapper wrapper--w790">
        <div class="card card-5">
            <div class="card-heading">
                <h2 class="title">Регистрация заказа</h2>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div id="products">
                        <div class="product">
                            <div class="row mb-2">
                                <div class="row">
                                    <div class="col-md-6 col-sm-12">
                                        <div class="name fw-bold">TITLE</div>
                                        <div class="value">
                                            <div class="input-group">
                                                <input id="product-unit" class="product-unit input--style-5" name="unit"
                                                    required>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--                    NEW ITEMS -->
                    </div>


                    <div class="row mb-2 p-2">
                        <div class="row">
                            <div class="col-md-4 col-sm-12">
                                <h5 class="card-title">CAR COMPANY</h5>
                                <select class="form-select" aria-label="Default select example" id="car-comp">

                                </select>
                            </div>
                            <div class="col-sm-12 col-md-4">
                                <h5 class="card-title">CAR NUMBER</h5>
                                <select class="form-select" aria-label="Default select example" id="cars">

                                </select>
                            </div>
                            <div class="col-md-4 col-sm-12">
                                <h5 class="card-title">ROUTER</h5>
                                <select class="form-select" aria-label="Default select example" id="routes">

                                </select>
                            </div>
                        </div>
                    </div>

                    <hr class="m-4">

                    <div>
                        <button class="btn1 btn--radius-2 btn-success" id="sub-btn"
                            type="submit">Create</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="/js/host.js"></script>
<script>
    // CAR-COMPANIES

    fetch(host.local + endpoints.carCompany, {
        ...requestConfig.withToken,
        method: 'GET'
    }).then(r => r.json())
    .then(({data, success}) => {
        if (success) {
            console.log(data)
        }
    })

    // CARS
    fetch(host.local + endpoints.cars, {
        ...requestConfig.withToken,
        method: 'GET'
    }).then(r => r.json())
    .then(({data, success}) => {
        if (success) {
            const carsSelect = document.getElementById('cars')

            for (const car of data.cars) {
                const option = document.createElement('option')
                option.value = car.id
                option.innerText = `${car.model} - ${car.number}`

                carsSelect.appendChild(option)
            }
        }
    })

    // ROUTE
    fetch(host.local + endpoints.routes, {
        ...requestConfig.withToken,
        method: 'GET'
    }).then(r => r.json())
    .then(({data, success}) => {
        if (success) {
            const routeSelect = document.getElementById('routes')

            for (const route of data.routes) {
                const option = document.createElement('option')
                option.value = route.id
                option.innerText = route.shortname

                routeSelect.appendChild(option)
            }
        }
    })
    .catch(err => console.log(err))


    document.getElementById('sub-btn').addEventListener('click', ev => {
        ev.preventDefault()

        console.log('cl')
    })
</script>


{{>footer}}